# Toolchain
CC    = @echo "compiling [c    ] $<"; gcc
CXX   = @echo "compiling [c++  ] $<"; g++
C11   = @echo "compiling [c++11] $<"; g++
LD    = @echo "linking $@"; g++
CLEAR = clear
MKDIR = mkdir -p
AR    = ar rcs

# Paths
PATH_MAN = man
PATH_SRC = src
PATH_LIB = libs
PATH_EXT = ext
PATH_SCN = scene
PATH_BIN = bin
PATH_OBJ = $(PATH_BIN)/obj

# Filenames
MAN  = $(PATH_MAN)/$(SW_TITLE).$(MAN_SECTION)

# Configuration
YEAR = $(shell date +"%Y")
TEST_CONFIG = -outdir $(PATH_TEST)


SRC_SCN = $(wildcard $(PATH_SCN)/*.scn)

.PHONY: dirtree_common
.PHONY: all
.PHONY: man_preview

all:

help:
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = ":.*?## "}; {printf "%-16s%s\n", $$1, $$2}'

dirtree_common:
	$(MKDIR) $(PATH_BIN)
	$(MKDIR) $(PATH_MAN)

man_preview:    ## Preview the man pages
	$(CLEAR) && nroff -Tascii -man "$(MAN)" | col -x | less -c

.PHONY: clean-all
clean-all:
	rm -rf Makefile
	rm -rf $(PATH_BIN)
	rm -rf $(PATH_OBJ)
